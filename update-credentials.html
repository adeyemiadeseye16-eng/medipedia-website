<body>
  <section class="card wide" style="margin-top:60px">
    <h1>Update Hospital Credentials</h1>
    <p class="tag">Required for full dashboard access</p>

    <form id="credForm">
      <input type="text"    name="hospital_name" placeholder="Hospital Name *" required>
      <input type="text"    name="address"       placeholder="Hospital Address *" required>
      <input type="text"    name="regNo"         placeholder="Company Registration No. *" required>
      <button type="submit" class="btn-primary">Save Credentials</button>
    </form>

    <p class="foot"><a href="dashboard.html">‚Üê Back</a></p>
  </section>

  <!-- FOREVER-SAVE + SUCCESS + REDIRECT -->
  <script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/src/sha256.min.js"></script>
<script>
  document.getElementById('credForm').addEventListener('submit', function (e) {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(e.target));

    const users   = JSON.parse(localStorage.getItem('mpUsers') || '[]');
    const session = JSON.parse(localStorage.getItem('mpSession') || '{}');
    const user    = users.find(u => u.personal.email === session.personal.email);
    if (!user) { alert('User not found'); return; }

    user.hospital = {
      name: data.hospital_name,
      address: data.address,
      regNo: data.regNo
    };
    localStorage.setItem('mpUsers', JSON.stringify(users));

    // instant redirect
    window.location.replace('dashboard.html');
  });
</script>
  </script>
</body>