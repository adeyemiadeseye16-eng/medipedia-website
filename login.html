<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Login â€“ Medipedia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="create account.css">
  <script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/src/sha256.min.js"></script>
</head>
<body>
  <section class="card">
    <h1>Medipedia</h1>
    <p class="tag">Secure Sign In</p>

    <form id="loginForm">
      <input type="email"    id="email" placeholder="Email" required>
      <input type="password" id="pwd"   placeholder="Password" required>
      <button type="submit">Sign In</button>
    </form>

    <p class="foot">New user? <a href="register.html">Create Account</a></p>
  </section>

  <script>
    document.getElementById('loginForm').addEventListener('submit', e => {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const pwd   = document.getElementById('pwd').value;

      const users = JSON.parse(localStorage.getItem('mpUsers') || '[]');
      const user  = users.find(u => u.email === email && u.passwordHash === sha256(pwd));

      if(!user){alert("Invalid email or password"); return;}

      // ---- create session ----
      const session = {email: user.email, name: user.name, token: sha256(Date.now()+email)};
      localStorage.setItem('mpSession', JSON.stringify(session));

      location.href = 'dashboard.html';
    });
  </script>
  <a href="index.html" style="position:absolute;top:10px;left:10px;padding:6px 12px;background:#007bff;color:white;text-decoration:none;border-radius:4px;">Home</a>
</body>
</html>